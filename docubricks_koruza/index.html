<!DOCTYPE html>
<html lang="en">
<head>
		<meta charset="UTF-8" />
		<title>Docubricks Doc</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
		<link href="terrier/font-awesome/css/font-awesome.min.css" rel="stylesheet"/>
		<link href="terrier/dist/terrierX.css" rel="stylesheet"/>
		<script src="stylesheets/jquery-1.11.3.min.js"></script>
		<script type="text/javascript" src="stylesheets/CollapsibleLists.js"></script>
		<script src="xml2jsobj.js"></script>
	    <script type="text/javascript" src="jh.js"></script>
</head>

<body>

	<nav id="menu">
					<h1 class="center">Boo!</h1>
	</nav>

	<main id="panel">

					<header id="top-bar" class="barx" style="background: #725DA7;">
									<div class="container">
									<div class="row">
										<div id="name-box" class="col2 colExample"></div>
											<div id="brick-box" class="col9 colExample"><nav id="cola"></nav></div>
											<div class="col1 colExample"><a class="name" href="#">BOM</a></div>
									</div>
									</div>
				</header>
				<div id="bspace" class="container center"><br/><br/><br/><br/><br/></div>
				<div id="ptree"></div>
				<div id="ccentre" class="container center"></div>
<!-- *********************************** -->
	<script  type="text/javascript">
	function loadxml(){
	// XML file
		var url = "instructions.docubricks.xml";
		// AJAX request
		var obj=new Object();
		var xhr = (window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"));
		xhr.onreadystatechange = XHRhandler;
		xhr.open("GET", url, true);
		xhr.send(null);
		// handle response
		function XHRhandler() {
			if (xhr.readyState == 4) {
				var obj = XML2jsobj(xhr.responseXML.documentElement);
				//console.log(obj);
				xhr = null;
				headx(obj);
			}
		}

}
loadxml();
</script>
<!-- *********************************** -->
<script  type="text/javascript">
 function headx(db){
	//console.log("hola");
	//console.log(db.project_name);
	//Display(db);

	//a id="pname" class="name" href="#"><span></span></a>

	
	renderBricksTree(db);
	
	
	/////////////////////////////////////
	 var q1=document.createElement("a");
		q1.setAttribute("class", "name");
		q1.setAttribute("href","#");
		var qn=document.createTextNode(db.project_name);
		q1.appendChild(qn);
		qx=document.getElementById('name-box');
		qx.appendChild(q1);

	for (var i=0, sl=db.unit.length; i < sl; i++) {
		/*
	 console.log(db.unit[i]);
	 console.log(db.unit[i].name);
	 console.log(db.unit[i].assembly_instruction);
*/
		var lk=Object.keys(db.unit[i].assembly_instruction).length;
	//	console.log(lk);

		if(lk>0){
		   var ln=db.unit[i].assembly_instruction.step.length;
		   //console.log(typeof(ln));
		   if (typeof(ln)=='number'){
 			//		console.log(ln);
		   }
		 	else{
		 		lnxa=typeof(db.unit[i].assembly_instruction.step.description);
		 		//console.log(lnxa);
		 	}
		 //var lnx=Object.keys(db.unit[i].assembly_instruction.step.length)
			//console.log(lnx);
	 }

		var qj=document.createElement("a");
		qj.setAttribute("class", "button");
		qj.setAttribute("href","#");
		qj.setAttribute("style", "text-align: right; font-size: .35rem; font-weight: 400; line-height: 34px; letter-spacing= .1rem; padding: 0 9px;");
		var qn=document.createTextNode("brk"+i.toString());
		qj.appendChild(qn);
		qy=document.getElementById("cola");
		qy.appendChild(qj);
		//q1.setAttribute("style", "background-color:red; font-size:2em;");
	//	qnx.appendChild(document.createTextNode(db.project_name));
	}

	for (var i=0, sl=db.unit.length; i < sl; i++) {
		 var nm = db.unit[i].name;
			//console.log(nm);
			var dx=document.getElementById("ccentre");
			//console.log(db.project_name);
			if (nm==db.project_name){
					 console.log(db.unit[i]);

						var qj1=document.createElement("div");
						qj1.setAttribute("class","row");

						var qj1a=document.createElement("div");
						qj1a.setAttribute("class","col7 colExample");

						var pqja=document.createElement("p");
						pqja.setAttribute("align","left");

					 var h1a=document.createElement("h1");
						var t1a=document.createTextNode("Project Description:");

						h1a.appendChild(t1a);
						pqja.appendChild(h1a);
						qj1a.appendChild(pqja);


						var pqjb=document.createElement("p");
						pqjb.setAttribute("align","left");
						var text=document.createTextNode(db.unit[i].abstract);
      pqjb.appendChild(text);
						qj1a.appendChild(pqjb);
						qj1.appendChild(qj1a);
						dx.appendChild(qj1);

						var toi=typeof db.unit[i].media[0];
						var qj1b=document.createElement("div");
						qj1b.setAttribute("class","col5 colExample");
						var img=document.createElement("img");
						if(toi == "undefined"){
							//dynamically add an image and set its attribute
								img.setAttribute("src",'images/Logo.png');
								//img.id="picture"
						}
						else{

							img.setAttribute("src",db.unit[i].media[0]);
							//img.id="picture"
						}
						qj1b.appendChild(img);
						qj1.appendChild(qj1b);
						dx.appendChild(qj1);

     var wwhow=document.createElement("div");
					wwhow.setAttribute("class","row");

     ////////////////////////////////////////////////////////////////////////
				 var qwhat=document.createElement("div");
					qwhat.setAttribute("class","col4 colExample");
					var qwhata=document.createElement("p");
					qwhata.setAttribute("align","left");
					var qwhatb=document.createElement("h1");
					var qwhatc=document.createTextNode("What:");
					qwhatb.appendChild(qwhatc);
					qwhata.appendChild(qwhatb);
					qwhat.appendChild(qwhata);



					if(typeof(db.unit[i].what[0])!="undefined"){
						 var pwhat=document.createElement("p");
					 	pwhat.setAttribute("align","left");
							var text=document.createTextNode(db.unit[i].what);
							pwhat.appendChild(text);
							qwhat.appendChild(pwhat);
							dx.appendChild(qwhat);
					}
					else{
							dx.appendChild(qwhat);
					}

					//////////////////////////////////////////////////////////////////////////
					var qwhy=document.createElement("div");
					qwhy.setAttribute("class","col4 colExample");
					var qwhya=document.createElement("p");
					qwhya.setAttribute("align","left");
					var qwhyb=document.createElement("h1");
					var qwhyc=document.createTextNode("Why:");
					qwhyb.appendChild(qwhyc);
					qwhya.appendChild(qwhyb);
					qwhy.appendChild(qwhya);



					if(typeof(db.unit[i].why[0])!="undefined"){
							var pwhy=document.createElement("p");
							pwhy.setAttribute("align","left");
							var text=document.createTextNode(db.unit[i].why);
							pwhy.appendChild(text);
							qwhy.appendChild(pwhy);
							dx.appendChild(qwhy);
					}
					else{
							dx.appendChild(qwhy);
					}
					///////////////////////////////////////////////////////////////////////////
					var qhow=document.createElement("div");
					qhow.setAttribute("class","col4 colExample");
					var qhowa=document.createElement("p");
					qhowa.setAttribute("align","left");
					var qhowb=document.createElement("h1");
					var qhowc=document.createTextNode("How:");
					qhowb.appendChild(qhowc);
					qhowa.appendChild(qhowb);
					qhow.appendChild(qhowa);


					if(typeof(db.unit[i].why[0])!="undefined"){
							var phow=document.createElement("p");
							phow.setAttribute("align","left");
							var text=document.createTextNode(db.unit[i].how);
							phow.appendChild(text);
							qhow.appendChild(phow);
							dx.appendChild(qhow);
					}
					else{
							dx.appendChild(qhow);
					}

					///////////////////////////////////////////////////////////////////////////
					var legalnode=document.createElement("div")
				 legalnode.setAttribute("class","col12 colExample");

					var qlegnodea=document.createElement("p");
					qlegnodea.setAttribute("align","left");
					var qlegnodeb=document.createElement("h1");
					var qlegnodec=document.createTextNode("Legal.");
					qlegnodeb.appendChild(qlegnodec);
					qlegnodea.appendChild(qlegnodeb);
					legalnode.appendChild(qlegnodea);


					var plegnodeax=document.createElement("p");
					plegnodeax.setAttribute("align","left");
					var txta=document.createTextNode("Licences:");
					plegnodeax.appendChild(txta);
					legalnode.appendChild(plegnodeax);
				//	dx.appendChild(legalnode);

					if (typeof(db.unit[i].license[0])!="undefined"){
							var txta2=document.createTextNode(db.unit[i].license);
							plegnodex.appendChild(txta2);
							legalnode.appendChild(plegnodex);
							//dx.appendChild(legalnode);
						}



					var plegnodebx=document.createElement("p");
					plegnodebx.setAttribute("align","left");
					var txtb=document.createTextNode("Authors:");
					plegnodebx.appendChild(txtb);
					legalnode.appendChild(plegnodebx);



					var plegnodecx=document.createElement("p");
					plegnodecx.setAttribute("align","left");
					var txtc=document.createTextNode("Copyright:");
					plegnodecx.appendChild(txtc);
					legalnode.appendChild(plegnodecx);

					dx.appendChild(legalnode);
					//////////////////////////////////////////////////////////////////////////
					var insnode=document.createElement("div");
					insnode.setAttribute("class","row");

					var insa=document.createElement("div");
					insa.setAttribute("class","col4 colExample");
					var lka=document.createElement("a");
					lka.setAttribute("href","#");
					var htxlka=document.createElement("h4");
					var txlka=document.createTextNode("Assembly Instructions");
					htxlka.appendChild(txlka);
					lka.appendChild(htxlka);
					insa.appendChild(lka);

					insnode.appendChild(insa);

					var insb=document.createElement("div");
					insb.setAttribute("class","col4 colExample");
					var lkb=document.createElement("a");
					lkb.setAttribute("href","#");
					var htxlkb=document.createElement("h4");
					var txlkb=document.createTextNode("Test Instructions");
					htxlkb.appendChild(txlkb);
					lkb.appendChild(htxlkb);
					insb.appendChild(lkb);

					insnode.appendChild(insb);

					var insc=document.createElement("div");
					insc.setAttribute("class","col4 colExample");
					var lkc=document.createElement("a");
					lkc.setAttribute("href","#");
					var htxlkc=document.createElement("h4");
					var txlkc=document.createTextNode("BOM");
					htxlkc.appendChild(txlkc);
					lkc.appendChild(htxlkc);
					insc.appendChild(lkc);

					insnode.appendChild(insc);
					dx.appendChild(insnode);
					//////////////////////////////////////////////////////////////////////////

					//////////////////////////////////////////////////////////////////////////
					var assins=document.createElement("div");

						var aihead=document.createElement("div");
						aihead.setAttribute("class","col12 colExample");
						var aititle=document.createElement("p");
						aititle.setAttribute("align","left");
						var aih1=document.createElement("h1");
						var aihtxt=document.createTextNode(db.unit[i].name+ " Assembly Instructions.");
						aih1.appendChild(aihtxt);
						aititle.appendChild(aih1);
						aihead.appendChild(aititle);
						assins.appendChild(aihead);

						console.log(Object.keys(db.unit[i].assembly_instruction).length);
						var lk=Object.keys(db.unit[i].assembly_instruction).length;

						if (lk==0){
							var nadadiv=document.createElement("div");
							nadadiv.setAttribute("class","col12 colExample");
							var nadap=document.createElement("p");
							nadap.setAttribute("align","left");
							var nadadivtxt=document.createTextNode("No information available");
						 nadap.appendChild(nadadivtxt);
						 nadadiv.appendChild(nadap);
						 nadadiv.appendChild(nadap);
							assins.appendChild(nadadiv);
						}

						else{
							 //ln=Object.keys(db.unit[i].assembly_instruction.step.length);
							 //for(j=0;j<lk;j++){

									//var stepdiv=document.createElement("div");
									//stepdiv.setAttribute("class","col12 colExample");
									//var stepp=document.createElement("p");
									//stepp.setAttribute("align","left");
									//var steph=document.createElement(h2);
									//var stephtxt=document.createTextNode("Step"+i.toString());
									//steph.appendChild(stephtxt);
									//stepp.appendChild(steph);
									//stepdiv.appendChild(stepp);

									//var steppinfo=document.createElement("p");
									//steppinfo.setAttribute("align","left");


									//assins.appendChild(nadadiv);

							// }
						}




					dx.appendChild(assins);
					//////////////////////////////////////////////////////////////////////////
					//////////////////////////////////////////////////////////////////////////

					}
	}

////////////////////////////////////////////////////////////////////////////////
var spaces=document.createElement("br");
dx.appendChild(spaces);
var spaces=document.createElement("br");
dx.appendChild(spaces);
///////////////////////////////////////////////////////////////////////////////
///OTHER NODES//////
///////////////////////////////////////////////////////////////////////////////
	for (var i=0, sl=db.unit.length; i < sl; i++) {
		 var nm = db.unit[i].name;
			//console.log(nm);
		//	var dx=document.getElementById("ccentre");
			//console.log(db.project_name);
			if (nm!=db.project_name){
					 console.log(db.unit[i].name);

						var qj1=document.createElement("div");
						qj1.setAttribute("class","row");

						var qj1a=document.createElement("div");
						qj1a.setAttribute("class","col7 colExample");

						var pqja=document.createElement("p");
						pqja.setAttribute("align","left");

					 var h1a=document.createElement("h1");
						var t1a=document.createTextNode("Brick "+(i+1).toString()+":"+db.unit[i].name);

						h1a.appendChild(t1a);
						pqja.appendChild(h1a);
						qj1a.appendChild(pqja);


						var pqjb=document.createElement("p");
						pqjb.setAttribute("align","left");
						var text=document.createTextNode(db.unit[i].abstract);
      pqjb.appendChild(text);
						qj1a.appendChild(pqjb);
						qj1.appendChild(qj1a);
						dx.appendChild(qj1);

						var toi=typeof db.unit[i].media[0];
						var qj1b=document.createElement("div");
						qj1b.setAttribute("class","col5 colExample");
						var img=document.createElement("img");
						if(toi == "undefined"){
							//dynamically add an image and set its attribute
								img.setAttribute("src",'images/Logo.png');
								//img.id="picture"
						}
						else{

							img.setAttribute("src",db.unit[i].media[0]);
							//img.id="picture"
						}
						qj1b.appendChild(img);
						qj1.appendChild(qj1b);
						dx.appendChild(qj1);

     var wwhow=document.createElement("div");
					wwhow.setAttribute("class","row");

     ////////////////////////////////////////////////////////////////////////
				 var qwhat=document.createElement("div");
					qwhat.setAttribute("class","col4 colExample");
					var qwhata=document.createElement("p");
					qwhata.setAttribute("align","left");
					var qwhatb=document.createElement("h1");
					var qwhatc=document.createTextNode("What:");
					qwhatb.appendChild(qwhatc);
					qwhata.appendChild(qwhatb);
					qwhat.appendChild(qwhata);



					if(typeof(db.unit[i].what[0])!="undefined"){
						 var pwhat=document.createElement("p");
					 	pwhat.setAttribute("align","left");
							var text=document.createTextNode(db.unit[i].what);
							pwhat.appendChild(text);
							qwhat.appendChild(pwhat);
							dx.appendChild(qwhat);
					}
					else{
							dx.appendChild(qwhat);
					}

					//////////////////////////////////////////////////////////////////////////
					var qwhy=document.createElement("div");
					qwhy.setAttribute("class","col4 colExample");
					var qwhya=document.createElement("p");
					qwhya.setAttribute("align","left");
					var qwhyb=document.createElement("h1");
					var qwhyc=document.createTextNode("Why:");
					qwhyb.appendChild(qwhyc);
					qwhya.appendChild(qwhyb);
					qwhy.appendChild(qwhya);



					if(typeof(db.unit[i].why[0])!="undefined"){
							var pwhy=document.createElement("p");
							pwhy.setAttribute("align","left");
							var text=document.createTextNode(db.unit[i].why);
							pwhy.appendChild(text);
							qwhy.appendChild(pwhy);
							dx.appendChild(qwhy);
					}
					else{
							dx.appendChild(qwhy);
					}
					///////////////////////////////////////////////////////////////////////////
					var qhow=document.createElement("div");
					qhow.setAttribute("class","col4 colExample");
					var qhowa=document.createElement("p");
					qhowa.setAttribute("align","left");
					var qhowb=document.createElement("h1");
					var qhowc=document.createTextNode("How:");
					qhowb.appendChild(qhowc);
					qhowa.appendChild(qhowb);
					qhow.appendChild(qhowa);


					if(typeof(db.unit[i].why[0])!="undefined"){
							var phow=document.createElement("p");
							phow.setAttribute("align","left");
							var text=document.createTextNode(db.unit[i].how);
							phow.appendChild(text);
							qhow.appendChild(phow);
							dx.appendChild(qhow);
					}
					else{
							dx.appendChild(qhow);
					}

					///////////////////////////////////////////////////////////////////////////
					var legalnode=document.createElement("div")
				 legalnode.setAttribute("class","col12 colExample");

					var qlegnodea=document.createElement("p");
					qlegnodea.setAttribute("align","left");
					var qlegnodeb=document.createElement("h1");
					var qlegnodec=document.createTextNode("Legal.");
					qlegnodeb.appendChild(qlegnodec);
					qlegnodea.appendChild(qlegnodeb);
					legalnode.appendChild(qlegnodea);


					var plegnodeax=document.createElement("p");
					plegnodeax.setAttribute("align","left");
					var txta=document.createTextNode("Licences:");
					plegnodeax.appendChild(txta);
					legalnode.appendChild(plegnodeax);
				//	dx.appendChild(legalnode);

					if (typeof(db.unit[i].license[0])!="undefined"){
							var txta2=document.createTextNode(db.unit[i].license);
							plegnodex.appendChild(txta2);
							legalnode.appendChild(plegnodex);
							//dx.appendChild(legalnode);
						}



					var plegnodebx=document.createElement("p");
					plegnodebx.setAttribute("align","left");
					var txtb=document.createTextNode("Authors:");
					plegnodebx.appendChild(txtb);
					legalnode.appendChild(plegnodebx);



					var plegnodecx=document.createElement("p");
					plegnodecx.setAttribute("align","left");
					var txtc=document.createTextNode("Copyright:");
					plegnodecx.appendChild(txtc);
					legalnode.appendChild(plegnodecx);

					dx.appendChild(legalnode);
					//////////////////////////////////////////////////////////////////////////
					var insnode=document.createElement("div");
					insnode.setAttribute("class","row");

					var insa=document.createElement("div");
					insa.setAttribute("class","col4 colExample");
					var lka=document.createElement("a");
					lka.setAttribute("href","#");
					var htxlka=document.createElement("h4");
					var txlka=document.createTextNode("Assembly Instructions");
					htxlka.appendChild(txlka);
					lka.appendChild(htxlka);
					insa.appendChild(lka);

					insnode.appendChild(insa);

					var insb=document.createElement("div");
					insb.setAttribute("class","col4 colExample");
					var lkb=document.createElement("a");
					lkb.setAttribute("href","#");
					var htxlkb=document.createElement("h4");
					var txlkb=document.createTextNode("Test Instructions");
					htxlkb.appendChild(txlkb);
					lkb.appendChild(htxlkb);
					insb.appendChild(lkb);

					insnode.appendChild(insb);

					var insc=document.createElement("div");
					insc.setAttribute("class","col4 colExample");
					var lkc=document.createElement("a");
					lkc.setAttribute("href","#");
					var htxlkc=document.createElement("h4");
					var txlkc=document.createTextNode("BOM");
					htxlkc.appendChild(txlkc);
					lkc.appendChild(htxlkc);
					insc.appendChild(lkc);

					insnode.appendChild(insc);
					dx.appendChild(insnode);
					//////////////////////////////////////////////////////////////////////////

					//////////////////////////////////////////////////////////////////////////
					var assins=document.createElement("div");

						var aihead=document.createElement("div");
						aihead.setAttribute("class","col12 colExample");
						var aititle=document.createElement("p");
						aititle.setAttribute("align","left");
						var aih1=document.createElement("h1");
						var aihtxt=document.createTextNode(db.unit[i].name+ " Assembly Instructions.");
						aih1.appendChild(aihtxt);
						aititle.appendChild(aih1);
						aihead.appendChild(aititle);
						assins.appendChild(aihead);

						console.log(Object.keys(db.unit[i].assembly_instruction).length);
						var lk=Object.keys(db.unit[i].assembly_instruction).length;

						if (lk==0){
							var nadadiv=document.createElement("div");
							nadadiv.setAttribute("class","col12 colExample");
							var nadap=document.createElement("p");
							nadap.setAttribute("align","left");
							var nadadivtxt=document.createTextNode("No information available");
						 nadap.appendChild(nadadivtxt);
						 nadadiv.appendChild(nadap);
						 nadadiv.appendChild(nadap);
							assins.appendChild(nadadiv);

							dx.appendChild(assins);
						}

						else{

										console.log(db.unit[i]);
					 				console.log(db.unit[i].name);
					 				console.log(db.unit[i].assembly_instruction);

										var lkn=Object.keys(db.unit[i].assembly_instruction).length;
										console.log(lk);

										if(lkn>0){
						   			var ln=db.unit[i].assembly_instruction.step.length;
						   			console.log(typeof(ln));
						   				if (typeof(ln)=='number'){

				 										console.log(ln);
															for(muj=0;muj<ln;muj++){
																var aidivn=document.createElement("div");

																	var aititle=document.createElement("p");
																	aititle.setAttribute("align","left");
																	var aih3=document.createElement("h3");
																	var saihtxt=document.createTextNode("Step "+(1+muj).toString());

																	aih3.appendChild(saihtxt);
																	aititle.appendChild(aih3);
																	aidivn.appendChild(aititle);

																	var aininfo=document.createElement("div");
																	aininfo.setAttribute("class","row");

																	var stepnimg=document.createElement("div");
																	stepnimg.setAttribute("class","col6 colExample");
																	//aininfo.appendChild(stepnimg);

																	///////////////////////////////////////////////////
																	var stimgsrc=db.unit[i].assembly_instruction.step[muj].media.file.url;
																	console.log(stimgsrc);

																	if(stimgsrc == "undefined"){
																			var img=document.createElement("img");
																		//dynamically add an image and set its attribute
																			img.setAttribute("src",'images/Logo.png');
																			//img.id="picture"
																	}
																	else{
																		var img=document.createElement("img");
																		img.setAttribute("src",stimgsrc);
																		img.setAttribute("width","100%");

																		//img.id="picture"
																	}
																 var stepimgp=document.createElement("p")
																	stepimgp.setAttribute("align","left");
																	stepimgp.appendChild(img);
																	stepnimg.appendChild(stepimgp);
																	aininfo.appendChild(stepnimg);
																	//qj1.appendChild(stepnimg);
																	//dx.appendChild();

																/////////////////////////////////////////////////////



																	var stepndesc=document.createElement("div");
																	stepndesc.setAttribute("class","col6 colExample");
																	var aidescp=document.createElement("p");
																	aidescp.setAttribute("align","left");
																	var aidescptxt=document.createTextNode(db.unit[i].assembly_instruction.step[muj].description);
																	aidescp.appendChild(aidescptxt);
																	stepndesc.appendChild(aidescp);
																	aininfo.appendChild(stepndesc);

																	aidivn.appendChild(aininfo);
																	assins.appendChild(aidivn);
																	dx.appendChild(assins);

															}

						   				}
						 						else{
						 							lnxa=typeof(db.unit[i].assembly_instruction.step.description);
						 							console.log(lnxa);



						 						}
					 					}
						}




					//dx.appendChild(assins);
					//////////////////////////////////////////////////////////////////////////
					//////////////////////////////////////////////////////////////////////////

					}
	}

///////////////////////////////////////////////////////////////////////////////
}
</script>
<!-- *********************************** -->
<script  type="text/javascript">
function Display(data) {

	var output = document.getElementById("output");

	//Show("Data from URL: "+url);

	if (data && data.physical_part) {
		if (data.physical_part.length) {
			// multiple statuses
			for (var i=0, sl=data.physical_part.length; i < sl; i++) {
				Show(data.physical_part[i]);
			}
		}
		else {
			// single status
			Show(data.physical_part);
		}
	}

	// display item
	function Show(physical_part) {
		if (typeof physical_part != "string") {
			physical_part = physical_part.description;
		}
		var p = document.createElement("p");
		p.appendChild(document.createTextNode(physical_part));
		output.appendChild(p);
	}

}
</script>
<!-- *********************************************************** -->

</main>
</body>
</html>
